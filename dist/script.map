{"version":3,"sources":["canvas.js","colony.js","grow.js","main.js","options.js","utils.js"],"sourcesContent":["define('canvas', ['exports', 'grow'], function (exports, _grow) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _grow2 = _interopRequireDefault(_grow);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var Canvas = function () {\n    function Canvas() {\n      var _this = this;\n\n      _classCallCheck(this, Canvas);\n\n      this.element = document.createElement('canvas');\n      this.context = this.element.getContext('2d');\n      this.context.globalCompositionOperation = 'overlay';\n      document.body.appendChild(this.element);\n      this.ratio = window.devicePixelRatio || 1;\n      window.addEventListener('resize', function () {\n        return _this.fitElement();\n      });\n      this.fitElement();\n    }\n\n    _createClass(Canvas, [{\n      key: 'fitElement',\n      value: function fitElement() {\n        var _window = window,\n            width = _window.innerWidth,\n            height = _window.innerHeight;\n\n        this.element.width = width * this.ratio;\n        this.element.height = height * this.ratio;\n        this.context.scale(this.ratio, this.ratio);\n        new _grow2.default(this.context, width, height);\n      }\n    }]);\n\n    return Canvas;\n  }();\n\n  exports.default = Canvas;\n});","define('colony', ['exports', 'options', 'utils'], function (exports, _options, _utils) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _slicedToArray = function () {\n    function sliceIterator(arr, i) {\n      var _arr = [];\n      var _n = true;\n      var _d = false;\n      var _e = undefined;\n\n      try {\n        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n          _arr.push(_s.value);\n\n          if (i && _arr.length === i) break;\n        }\n      } catch (err) {\n        _d = true;\n        _e = err;\n      } finally {\n        try {\n          if (!_n && _i[\"return\"]) _i[\"return\"]();\n        } finally {\n          if (_d) throw _e;\n        }\n      }\n\n      return _arr;\n    }\n\n    return function (arr, i) {\n      if (Array.isArray(arr)) {\n        return arr;\n      } else if (Symbol.iterator in Object(arr)) {\n        return sliceIterator(arr, i);\n      } else {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n      }\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var random = Math.random;\n\n  var Colony = function () {\n    function Colony(grow, x, y, color) {\n      _classCallCheck(this, Colony);\n\n      this.edges = [];\n\n      this.context = grow.context;\n      this.width = grow.width;\n      this.height = grow.height;\n      this.grid = grow.grid;\n      this.plant(x, y, color);\n    }\n\n    _createClass(Colony, [{\n      key: 'plant',\n      value: function plant(x, y, color) {\n        if (this.edges.length < _options.growEdgeLimit) {\n          this.context.fillStyle = (0, _options.growColor)(color);\n          this.context.fillRect(x, y, 1, 1);\n          this.grid[x][y] = true;\n          this.edges.push([x, y, color]);\n        }\n      }\n    }, {\n      key: 'grow',\n      value: function grow() {\n        var _this = this;\n\n        var currentEdges = (0, _options.growEdgeSlice)(this.edges);\n        currentEdges.forEach(function (edge) {\n          return _this.spread(edge[0], edge[1], edge[2]);\n        });\n      }\n    }, {\n      key: 'neighbors',\n      value: function neighbors(x, y) {\n        var _this2 = this;\n\n        var top = x > 0,\n            bottom = x < this.width - 1;\n        var left = y > 0,\n            right = y < this.height - 1;\n\n        return [top && [-1, 0], bottom && [+1, 0], top && left && [-1, -1], top && right && [-1, +1], bottom && left && [+1, -1], bottom && right && [+1, +1], left && [0, -1], right && [0, +1]].filter(function (n) {\n          return n;\n        }).map(function (n) {\n          return [x + n[0], y + n[1]];\n        }).filter(function (n) {\n          return !_this2.grid[n[0]][n[1]] || random() < _options.growBackProbability;\n        });\n      }\n    }, {\n      key: 'spread',\n      value: function spread(x, y, color) {\n        var _context;\n\n        var neighbors = (_context = this.neighbors(x, y), _utils.shuffle).call(_context);\n        for (var i = 0; i < neighbors.length; i++) {\n          var _neighbors$i = _slicedToArray(neighbors[i], 2),\n              nx = _neighbors$i[0],\n              ny = _neighbors$i[1];\n\n          color = (color + _options.growColorIncrement) % 1;\n          this.plant(nx, ny, color);\n          var chance = random();\n          if (chance < _options.growSpreadProbability) {\n            this.spread(nx, ny, color);\n            return;\n          } else if (1 - chance < _options.growBranchProbability) {\n            return;\n          }\n        }\n      }\n    }]);\n\n    return Colony;\n  }();\n\n  exports.default = Colony;\n});","define('grow', ['exports', 'colony', 'options', 'utils'], function (exports, _colony, _options, _utils) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _colony2 = _interopRequireDefault(_colony);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var random = Math.random,\n      round = Math.round;\n\n  var Grow = function () {\n    function Grow(context, width, height) {\n      _classCallCheck(this, Grow);\n\n      this.colonies = [];\n\n      this.context = context;\n      this.width = width;\n      this.height = height;\n      this.grid = (0, _utils.ndArray)(width, height);\n      this.seed();\n      this.grow();\n    }\n\n    _createClass(Grow, [{\n      key: 'seed',\n      value: function seed() {\n        var width = this.width,\n            height = this.height;\n\n        var count = _options.growColonyCount;\n        while (count--) {\n          var x = round(random() * width);\n          var y = round(random() * height);\n          var color = random();\n          var colony = new _colony2.default(this, x, y, color);\n          this.colonies.push(colony);\n        }\n      }\n    }, {\n      key: 'grow',\n      value: function grow() {\n        var _this = this;\n\n        this.colonies.forEach(function (colony) {\n          return colony.grow();\n        });\n        requestAnimationFrame(function () {\n          return _this.grow();\n        });\n      }\n    }]);\n\n    return Grow;\n  }();\n\n  exports.default = Grow;\n});","define('main', ['exports', 'canvas'], function (exports, _canvas) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = main;\n\n  var _canvas2 = _interopRequireDefault(_canvas);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function main() {\n    var canvas = new _canvas2.default();\n  }\n});","define(\"options\", [\"exports\"], function (exports) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  var abs = Math.abs;\n\n\n  var growEdgeSlices = {\n    first: function first(arr) {\n      return arr.splice(0, growSpreadLimit);\n    },\n    last: function last(arr) {\n      return arr.splice(arr.length - growSpreadLimit, growSpreadLimit);\n    }\n  };\n  var growColors = {\n    rainbow: function rainbow(n) {\n      return \"hsl(\" + n * 360 + \", 65%, 65%\";\n    },\n    clouds: function clouds(n) {\n      n = 2 * abs(n - 0.5);\n      return \"hsl(\" + (n * 100 + 150) + \", \" + (65 + n * 15) + \"%, \" + (50 + n * 10) + \"%\";\n    }\n  };\n  var growEdgeSlice = exports.growEdgeSlice = growEdgeSlices.last;\n  var growColor = exports.growColor = growColors.rainbow;\n  var growBranchProbability = exports.growBranchProbability = 0.05;\n  var growSpreadProbability = exports.growSpreadProbability = 0.5;\n  var growBackProbability = exports.growBackProbability = 0.05;\n  var growEdgeLimit = exports.growEdgeLimit = 100000;\n  var growSpreadLimit = exports.growSpreadLimit = 100;\n  var growColorIncrement = exports.growColorIncrement = 0.0001;\n  var growColonyCount = exports.growColonyCount = 50;\n});","define(\"utils\", [\"exports\"], function (exports) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.angle = angle;\n  exports.distance = distance;\n  exports.add = add;\n  exports.subtract = subtract;\n  exports.sum = sum;\n  exports.average = average;\n  exports.dot = dot;\n  exports.weightedAverage = weightedAverage;\n  exports.pairs = pairs;\n  exports.limit = limit;\n  exports.sign = sign;\n  exports.ndArray = ndArray;\n  exports.slicedEach = slicedEach;\n  exports.shuffle = shuffle;\n  var sin = Math.sin,\n      ata2 = Math.ata2,\n      min = Math.min,\n      max = Math.max,\n      sqrt = Math.sqrt,\n      floor = Math.floor,\n      random = Math.random;\n  function angle(a, b) {\n    return atan2(a[1] - b[1], a[0] - b[0]);\n  }\n\n  function distance(x, y) {\n    return sqrt(x * x + y * y);\n  }\n\n  function add(a, b) {\n    return a + b;\n  }\n\n  function subtract(a, b) {\n    return a - b;\n  }\n\n  function sum(arr) {\n    return arr.reduce(add);\n  }\n\n  function average(arr) {\n    return sum(arr) / arr.length;\n  }\n\n  function dot(a, b) {\n    return a.reduce(function (sum, item, index) {\n      return sum + item * b[index];\n    }, 0);\n  }\n\n  function weightedAverage(weights) {\n    return dot(this, weights) / sum(weights);\n  }\n\n  function pairs() {\n    var _this = this;\n\n    return Array(this.length - 1).fill(0).map(function (_, i) {\n      return [_this[i], _this[i + 1]];\n    });\n  }\n\n  function limit(n, lower, upper) {\n    return max(min(n, upper), lower);\n  }\n\n  function sign(n) {\n    return n > 0 ? 1 : n < 0 ? -1 : 0;\n  }\n\n  function ndArray(dimension) {\n    for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      rest[_key - 1] = arguments[_key];\n    }\n\n    if (dimension === undefined) return;\n    return Array(dimension).fill(0).map(function () {\n      return ndArray.apply(undefined, rest);\n    });\n  }\n\n  function slicedEach(min, max, fn) {\n    for (var i = min; i < max; i++) {\n      fn(this[i]);\n    }\n  }\n\n  function shuffle() {\n    for (var i = this.length - 1; i > 0; i--) {\n      var index = floor(random() * i);\n      var _ref = [this[index], this[i]];\n      this[i] = _ref[0];\n      this[index] = _ref[1];\n    }\n    return this;\n  }\n});"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;","file":"script.js"}